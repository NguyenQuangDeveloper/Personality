<Window x:Class="AlarmConfig.Services.Dialog.AlarmDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converter="clr-namespace:AlarmConfig.Converters"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:local="clr-namespace:AlarmConfig.Services.Dialog"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        Title="AlarmDialog"
        ResizeMode="NoResize"
        ShowInTaskbar="True"
        Topmost="True"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        mc:Ignorable="d">
    <Window.Resources>
        <converter:TextShapeVisibilityConverter x:Key="TextShapeVisibilityConverter" />
        <converter:BoolToFontWeightConverter x:Key="BoolToFontWeightConverter" />
        <converter:BoolToFontStyleConverter x:Key="BoolToFontConverter" />
        <Style x:Key="ThreeDButtonStyle"
               TargetType="Button">
            <Setter Property="Margin"
                    Value="1,2,1,2" />
            <Setter Property="FontSize"
                    Value="16" />
            <Setter Property="FontWeight"
                    Value="DemiBold" />
            <Setter Property="HorizontalContentAlignment"
                    Value="Center" />
            <Setter Property="VerticalContentAlignment"
                    Value="Center" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="Gray"
                                BorderThickness="1"
                                CornerRadius="5">
                            <Border.Triggers>
                                <EventTrigger RoutedEvent="Border.MouseEnter">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="#F0F0F0"
                                                            Duration="0:0:0.1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                                <EventTrigger RoutedEvent="Border.MouseLeave">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="{TemplateBinding Background}"
                                                            Duration="0:0:0.1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Border.Triggers>
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Direction="320"
                                      Opacity="0.5"
                                      ShadowDepth="2"
                                      Color="Black" />
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <Border Background="#CEDDEF"
                BorderBrush="LightGray"
                BorderThickness="1"
                CornerRadius="4">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="40" />
                    <RowDefinition Height="150" />
                    <RowDefinition Height="150" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="0">
                    <Label HorizontalContentAlignment="Left"
                           VerticalContentAlignment="Center"
                           Content="{Binding LanguageResources[ErrorOccur], FallbackValue='Error Occur'}"
                           FontSize="10" />
                </Grid>
                <Grid Grid.Row="1">
                    <Border BorderBrush="Gray"
                            BorderThickness="1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50" />
                                <ColumnDefinition Width="60" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="100" />
                            </Grid.ColumnDefinitions>
                            <Grid Background="White">
                                <Image Width="50"
                                       Height="40"
                                       Margin="1"
                                       Source="pack://application:,,,/AlarmConfig;component/Resources/Images/Alarm.jpg"
                                       Stretch="Fill" />
                            </Grid>
                            <Grid Grid.Column="1"
                                  Background="Black">
                                <Label HorizontalContentAlignment="Center"
                                       VerticalContentAlignment="Center"
                                       BorderBrush="White"
                                       BorderThickness="1">
                                    <TextBlock HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontSize="15"
                                               Foreground="White"
                                               Text="{Binding AlarmCode}" />
                                </Label>
                            </Grid>
                            <Grid Grid.Column="2"
                                  Background="Black">
                                <Label HorizontalContentAlignment="Left"
                                       VerticalContentAlignment="Center"
                                       BorderBrush="White"
                                       BorderThickness="1">
                                    <TextBlock HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               FontSize="15"
                                               Foreground="White"
                                               Text="{Binding NameAlarm}"
                                               x:Name="txtAlarmName" />
                                </Label>
                            </Grid>
                            <Grid Grid.Column="3"
                                  Background="Black">
                                <Button x:Name="btnHideAlarm">
                                    <Button.Background>
                                        <LinearGradientBrush StartPoint="0.456,1.381"
                                                             EndPoint="0.451,0.453">
                                            <GradientStop Offset="0.418"
                                                          Color="Black" />
                                            <GradientStop Offset="0.95"
                                                          Color="#FF968966" />
                                        </LinearGradientBrush>
                                    </Button.Background>
                                    <StackPanel Orientation="Horizontal">
                                        <Image Width="30"
                                               Height="30"
                                               Margin="1"
                                               Source="pack://application:,,,/AlarmConfig;component/Resources/Images/Alarm.jpg"
                                               Stretch="Fill" />
                                        <TextBlock VerticalAlignment="Center"
                                                   FontWeight="DemiBold"
                                                   Text="{Binding LanguageResources[HideAlarm], FallbackValue='Hide Alarm'}" />
                                    </StackPanel>
                                </Button>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>
                <Grid Grid.Row="2">
                    <Border Margin="10,5,10,5"
                            Background="White"
                            BorderBrush="#FF438E90"
                            BorderThickness="1"
                            CornerRadius="4">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Label Grid.Row="0"
                                   HorizontalContentAlignment="Left"
                                   VerticalContentAlignment="Center"
                                   BorderBrush="#FF843447"
                                   BorderThickness="0,0,0,1"
                                   Content="{Binding LanguageResources[Cause], FallbackValue='Cause'}"
                                   FontWeight="Bold"
                                   Foreground="White"
                                   Background="#20136E" />
                            <ScrollViewer Grid.Row="1"
                                          HorizontalScrollBarVisibility="Disabled"
                                          VerticalScrollBarVisibility="Auto">
                                <TextBlock HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           FontSize="20"
                                           FontWeight="DemiBold"
                                           Foreground="Blue"
                                           Text="{Binding Cause, FallbackValue='Gas3 Pressure(Option) Signal is not detected'}"
                                           TextAlignment="Center"
                                           TextWrapping="Wrap" />
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </Grid>
                <Grid Grid.Row="3">
                    <Border Margin="10,5,10,5"
                            Background="White"
                            BorderBrush="#FF438E90"
                            BorderThickness="1"
                            CornerRadius="4">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Label Grid.Row="0"
                                   HorizontalContentAlignment="Left"
                                   VerticalContentAlignment="Center"
                                   BorderBrush="#20136E"
                                   BorderThickness="0,0,0,1"
                                   Content="{Binding LanguageResources[Action], FallbackValue='Action'}"
                                   FontWeight="Bold"
                                   Background="#20136E"
                                   Foreground="White" />
                            <ScrollViewer Grid.Row="1"
                                          HorizontalScrollBarVisibility="Disabled"
                                          VerticalScrollBarVisibility="Auto">
                                <TextBlock HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           FontSize="20"
                                           FontWeight="DemiBold"
                                           Foreground="Blue"
                                           Text="{Binding Action}"
                                           TextAlignment="Center"
                                           TextWrapping="Wrap" />
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </Grid>
                <Grid x:Name="canvas"
                      Grid.Row="5"
                      Visibility="Visible"
                      Margin="10,0,10,0">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto"
                                  VerticalScrollBarVisibility="Auto">
                        <Canvas Grid.Column="1"
                                Width="{Binding DisplayWidth}"
                                Height="{Binding DisplayHeight}"
                                Background="White"
                                ClipToBounds="True">

                            <!--<Grid RenderTransform="{Binding CombinedTransform}">-->
                            <Grid>
                                <Grid.RenderTransformOrigin>0.5,0.5</Grid.RenderTransformOrigin>
                                <Image Width="{Binding DisplayWidth}"
                                       Height="{Binding DisplayHeight}"
                                       Source="{Binding ImageAlarm}"
                                       Stretch="Fill" />
                                <ItemsControl ItemsSource="{Binding Shapes}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <Canvas />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>

                                    <ItemsControl.ItemContainerStyle>
                                        <Style TargetType="ContentPresenter">
                                            <Setter Property="Canvas.Left"
                                                    Value="{Binding X}" />
                                            <Setter Property="Canvas.Top"
                                                    Value="{Binding Y}" />
                                        </Style>
                                    </ItemsControl.ItemContainerStyle>

                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <!--  Rectangle  -->
                                                <Rectangle Width="{Binding Width}"
                                                           Height="{Binding Height}"
                                                           RenderTransformOrigin="0.5,0.5"
                                                           StrokeThickness="{Binding StrokeThickness}"
                                                           Tag="{Binding ID}">

                                                    <Rectangle.Style>
                                                        <Style TargetType="Rectangle">
                                                            <Setter Property="Visibility"
                                                                    Value="Collapsed" />
                                                            <Setter Property="Stroke"
                                                                    Value="{Binding Color}" />

                                                            <Setter Property="RenderTransform">
                                                                <Setter.Value>
                                                                    <ScaleTransform ScaleX="1"
                                                                                    ScaleY="1" />
                                                                </Setter.Value>
                                                            </Setter>

                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding ShapeType}"
                                                                             Value="Rectangle">
                                                                    <Setter Property="Visibility"
                                                                            Value="Visible" />
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding IsSelected}"
                                                                             Value="True">
                                                                    <Setter Property="Stroke"
                                                                            Value="Cyan" />
                                                                </DataTrigger>
                                                                <DataTrigger Binding="{Binding IsAnimating}"
                                                                             Value="True">
                                                                    <DataTrigger.EnterActions>
                                                                        <BeginStoryboard>
                                                                            <Storyboard>
                                                                                <DoubleAnimation AutoReverse="True"
                                                                                                 RepeatBehavior="Forever"
                                                                                                 Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                                                                                                 From="1"
                                                                                                 To="1.5"
                                                                                                 Duration="0:0:0.2" />
                                                                                <DoubleAnimation AutoReverse="True"
                                                                                                 RepeatBehavior="Forever"
                                                                                                 Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                                                                                                 From="1"
                                                                                                 To="1.5"
                                                                                                 Duration="0:0:0.2" />
                                                                            </Storyboard>
                                                                        </BeginStoryboard>
                                                                    </DataTrigger.EnterActions>
                                                                    <DataTrigger.ExitActions>
                                                                        <BeginStoryboard>
                                                                            <Storyboard>
                                                                                <DoubleAnimation Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                                                                                                 To="1"
                                                                                                 Duration="0:0:0.2" />
                                                                                <DoubleAnimation Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                                                                                                 To="1"
                                                                                                 Duration="0:0:0.2" />
                                                                            </Storyboard>
                                                                        </BeginStoryboard>
                                                                    </DataTrigger.ExitActions>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Rectangle.Style>
                                                </Rectangle>
                                                <!--  Ellipse  -->
                                                <Ellipse Width="{Binding Width}"
                                                         Height="{Binding Height}"
                                                         RenderTransformOrigin="0.5,0.5"
                                                         StrokeThickness="{Binding StrokeThickness}"
                                                         Tag="{Binding ID}">

                                                    <Ellipse.Style>
                                                        <Style TargetType="Ellipse">
                                                            <Setter Property="Visibility"
                                                                    Value="Collapsed" />
                                                            <Setter Property="Stroke"
                                                                    Value="{Binding Color}" />

                                                            <Setter Property="RenderTransform">
                                                                <Setter.Value>
                                                                    <ScaleTransform ScaleX="1"
                                                                                    ScaleY="1" />
                                                                </Setter.Value>
                                                            </Setter>

                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding ShapeType}"
                                                                             Value="Ellipse">
                                                                    <Setter Property="Visibility"
                                                                            Value="Visible" />
                                                                </DataTrigger>

                                                                <DataTrigger Binding="{Binding IsSelected}"
                                                                             Value="True">
                                                                    <Setter Property="Stroke"
                                                                            Value="Cyan" />
                                                                </DataTrigger>

                                                                <DataTrigger Binding="{Binding IsAnimating}"
                                                                             Value="True">
                                                                    <DataTrigger.EnterActions>
                                                                        <BeginStoryboard>
                                                                            <Storyboard>
                                                                                <DoubleAnimation AutoReverse="True"
                                                                                                 RepeatBehavior="Forever"
                                                                                                 Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                                                                                                 From="1"
                                                                                                 To="1.5"
                                                                                                 Duration="0:0:0.2" />
                                                                                <DoubleAnimation AutoReverse="True"
                                                                                                 RepeatBehavior="Forever"
                                                                                                 Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                                                                                                 From="1"
                                                                                                 To="1.5"
                                                                                                 Duration="0:0:0.2" />
                                                                            </Storyboard>
                                                                        </BeginStoryboard>
                                                                    </DataTrigger.EnterActions>
                                                                    <DataTrigger.ExitActions>
                                                                        <BeginStoryboard>
                                                                            <Storyboard>
                                                                                <DoubleAnimation Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                                                                                                 To="1"
                                                                                                 Duration="0:0:0.2" />
                                                                                <DoubleAnimation Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                                                                                                 To="1"
                                                                                                 Duration="0:0:0.2" />
                                                                            </Storyboard>
                                                                        </BeginStoryboard>
                                                                    </DataTrigger.ExitActions>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Ellipse.Style>
                                                </Ellipse>
                                                <!--  TEXT  -->
                                                <Grid Width="{Binding Width}"
                                                      Height="{Binding Height}"
                                                      Visibility="{Binding ShapeType, Converter={StaticResource TextShapeVisibilityConverter}}">

                                                    <TextBox Width="{Binding Width}"
                                                             Height="{Binding Height}"
                                                             Background="Transparent"
                                                             BorderThickness="0"
                                                             FontStyle="{Binding IsItalic, Converter={StaticResource BoolToFontConverter}}"
                                                             FontWeight="{Binding IsBold, Converter={StaticResource BoolToFontWeightConverter}}"
                                                             FontSize="{Binding FontSize}"
                                                             Foreground="{Binding Color}"
                                                             Visibility="Hidden"
                                                             Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}">
                                                    </TextBox>

                                                    <TextBlock Foreground="{Binding Color}"
                                                               Text="{Binding Text}"
                                                               FontStyle="{Binding IsItalic, Converter={StaticResource BoolToFontConverter}}"
                                                               FontWeight="{Binding IsBold, Converter={StaticResource BoolToFontWeightConverter}}"
                                                               FontSize="{Binding FontSize}"
                                                               TextWrapping="Wrap"
                                                               Visibility="Visible">
                                                    </TextBlock>
                                                </Grid>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </Grid>
                        </Canvas>
                    </ScrollViewer>
                </Grid>
                <Grid Grid.Row="4">
                    <Button x:Name="btnConfirm"
                            Width="110"
                            Margin="0,5,10,5"
                            HorizontalAlignment="Right"
                            Background="White"
                            Style="{StaticResource ThreeDButtonStyle}">
                        <StackPanel Orientation="Horizontal">
                            <Image Width="25"
                                   Height="25"
                                   Margin="4"
                                   Source="pack://application:,,,/AlarmConfig;component/Resources/Images/confirm1.png"
                                   Stretch="Fill" />
                            <TextBlock VerticalAlignment="Center"
                                       Text="{Binding LanguageResources[Confirm], FallbackValue='Confirm'}" />
                        </StackPanel>
                    </Button>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Window>
